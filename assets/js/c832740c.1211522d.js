"use strict";(globalThis.webpackChunk_spautz_skip_the_build_docs_website=globalThis.webpackChunk_spautz_skip_the_build_docs_website||[]).push([[7],{2693(e,t,n){n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>a,frontMatter:()=>d,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"core/rules","title":"Overview","description":"This is a sample docs site for the packages in spautz/skip-the-build","source":"@site/docs/core/rules.md","sourceDirName":"core","slug":"/core/rules","permalink":"/skip-the-build/core/rules","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"mainSidebar","previous":{"title":"Overview","permalink":"/skip-the-build/core/config"},"next":{"title":"Overview","permalink":"/skip-the-build/core/presets"}}');var i=n(6259),r=n(3230);const d={sidebar_position:2},l="Overview",c={},o=[{value:"Environment conditions",id:"environment-conditions",level:4},{value:"Repo conditions",id:"repo-conditions",level:4},{value:"General conditions",id:"general-conditions",level:4}];function h(e){const t={a:"a",code:"code",h1:"h1",h4:"h4",header:"header",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"overview",children:"Overview"})}),"\n",(0,i.jsxs)(t.p,{children:["This is a sample docs site for the packages in ",(0,i.jsx)(t.a,{href:"https://github.com/spautz/skip-the-build",children:"spautz/skip-the-build"})]}),"\n",(0,i.jsx)(t.p,{children:"--"}),"\n",(0,i.jsxs)(t.p,{children:["A rule is a function that checks some condition and returns either ",(0,i.jsx)(t.code,{children:"true"})," only if the condition\nhas been met. Rules may be async, and you can add your own custom conditions by simply adding\nyour own functions to ",(0,i.jsx)(t.code,{children:"skipWhen"})," or ",(0,i.jsx)(t.code,{children:"neverSkipWhen"}),"."]}),"\n",(0,i.jsxs)(t.p,{children:["Many rules have overlapping checks (like ",(0,i.jsx)(t.code,{children:"isCI"}),"/",(0,i.jsx)(t.code,{children:"notCI"}),"/",(0,i.jsx)(t.code,{children:"isLocalDev"}),"/",(0,i.jsx)(t.code,{children:"notLocalDev"}),") --\npick the one which is most readable for your case."]}),"\n",(0,i.jsx)(t.h4,{id:"environment-conditions",children:"Environment conditions"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"Rule"}),(0,i.jsx)(t.th,{children:"Returns true if:"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"envVarExists(name)"})}),(0,i.jsx)(t.td,{children:"The env variable has been set at all"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"envVarHasValue(name, value|values)"})}),(0,i.jsx)(t.td,{children:"The env variable has been set, and it's one of the values provided"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"envVarIsDisabled(name)"})}),(0,i.jsxs)(t.td,{children:["The env var has either not been set, or it's set to ``, ",(0,i.jsx)(t.code,{children:"false"}),", or ",(0,i.jsx)(t.code,{children:"0"})]})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"envVarIsEnabled(name)"})}),(0,i.jsxs)(t.td,{children:["The env var has been set, and it's not ``, ",(0,i.jsx)(t.code,{children:"false"}),", or ",(0,i.jsx)(t.code,{children:"0"})]})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"isCI"})}),(0,i.jsxs)(t.td,{children:[(0,i.jsx)(t.a,{href:"https://www.npmjs.com/package/ci-info",children:"ci-info"})," detected a CI environment"]})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"isDevelopmentMode"})}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:'NODE_ENV !== "production"'})})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"isProductionMode"})}),(0,i.jsx)(t.td,{children:(0,i.jsx)(t.code,{children:'NODE_ENV === "production"'})})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"isPullRequest"})}),(0,i.jsxs)(t.td,{children:[(0,i.jsx)(t.a,{href:"https://www.npmjs.com/package/ci-info",children:"ci-info"})," detected a PR"]})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"notCI"})}),(0,i.jsxs)(t.td,{children:[(0,i.jsx)(t.a,{href:"https://www.npmjs.com/package/ci-info",children:"ci-info"})," did not detect a CI environment"]})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"notPullRequest"})}),(0,i.jsxs)(t.td,{children:[(0,i.jsx)(t.a,{href:"https://www.npmjs.com/package/ci-info",children:"ci-info"})," did not detect a PR"]})]})]})]}),"\n",(0,i.jsx)(t.h4,{id:"repo-conditions",children:"Repo conditions"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"Rule"}),(0,i.jsx)(t.th,{children:"Returns true if:"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"isGitBranch(string|regex)"})}),(0,i.jsx)(t.td,{children:"The current git branch matches the string or pattern"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"notGitBranch(string|regex)"})}),(0,i.jsx)(t.td,{children:"The current git branch does not match the string or pattern"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"isShallowClone"})}),(0,i.jsx)(t.td,{children:"The current git repo is a shallow repository"})]})]})]}),"\n",(0,i.jsx)(t.h4,{id:"general-conditions",children:"General conditions"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"Rule"}),(0,i.jsx)(t.th,{children:"Returns true if:"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"and(...Rules)"})}),(0,i.jsx)(t.td,{children:"All rules return true"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"not(Rule)"})}),(0,i.jsx)(t.td,{children:"The rule provided did not return true"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"or(...Rules)"})}),(0,i.jsx)(t.td,{children:"Any rule returns true"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"random(%)"})}),(0,i.jsx)(t.td,{children:"Math.rand() is smaller than the number given. (% should be between 0 and 1)"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Any function"}),(0,i.jsx)(t.td,{children:"The function returns true, or a promise that resolves to true"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Any promise"}),(0,i.jsx)(t.td,{children:"The promise resolves to true"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Any other value"}),(0,i.jsx)(t.td,{children:"The value is exactly true"})]})]})]})]})}function a(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},3230(e,t,n){n.d(t,{R:()=>d,x:()=>l});var s=n(1299);const i={},r=s.createContext(i);function d(e){const t=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);